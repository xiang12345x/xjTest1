"use strict";(self.webpackChunkmini_program=self.webpackChunkmini_program||[]).push([[156],{5329:(T,y,l)=>{l.d(y,{Dz:()=>g,Rt:()=>a});var z=l(7582),m=l(521),t=l(7716),_=l(2729),C=l(6182),v=l(946),f=l(8583),u=l(464);const M=["textEl"];function c(o,r){if(1&o&&t._UZ(0,"i",3),2&o){const e=t.oxw();t.Q6J("nzType",e.nzIcon)}}function E(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"img",4),t.NdJ("error",function(i){return t.CHM(e),t.oxw().imgError(i)}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("src",e.nzSrc,t.LSH),t.uIk("srcset",e.nzSrcSet,t.LSH)("alt",e.nzAlt)}}function P(o,r){if(1&o&&(t.TgZ(0,"span",5,6),t._uU(2),t.qZA()),2&o){const e=t.oxw();t.Q6J("ngStyle",e.textStyles),t.xp6(2),t.Oqu(e.nzText)}}let g=(()=>{class o{constructor(e,n,i,h){this.nzConfigService=e,this.elementRef=n,this.cdr=i,this.platform=h,this._nzModuleName="avatar",this.nzShape="circle",this.nzSize="default",this.nzGap=4,this.nzError=new t.vpe,this.hasText=!1,this.hasSrc=!0,this.hasIcon=!1,this.textStyles={},this.classMap={},this.customSize=null,this.el=this.elementRef.nativeElement,this.elementRef.nativeElement.classList.add("ant-avatar")}imgError(e){this.nzError.emit(e),e.defaultPrevented||(this.hasSrc=!1,this.hasIcon=!1,this.hasText=!1,this.nzIcon?this.hasIcon=!0:this.nzText&&(this.hasText=!0),this.cdr.detectChanges(),this.setSizeStyle(),this.notifyCalc())}ngOnChanges(){this.hasText=!this.nzSrc&&!!this.nzText,this.hasIcon=!this.nzSrc&&!!this.nzIcon,this.hasSrc=!!this.nzSrc,this.setSizeStyle(),this.notifyCalc()}calcStringSize(){if(!this.hasText)return;const e=this.textEl.nativeElement.offsetWidth,n=this.el.getBoundingClientRect().width,i=2*this.nzGap<n?2*this.nzGap:8;this.textStyles={transform:`scale(${n-i<e?(n-i)/e:1}) translateX(-50%)`},this.customSize&&Object.assign(this.textStyles,{lineHeight:this.customSize}),this.cdr.detectChanges()}notifyCalc(){this.platform.isBrowser&&setTimeout(()=>{this.calcStringSize()})}setSizeStyle(){this.customSize="number"==typeof this.nzSize?`${this.nzSize}px`:null,this.cdr.markForCheck()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_.jY),t.Y36(t.SBq),t.Y36(t.sBO),t.Y36(m.t4))},o.\u0275cmp=t.Xpm({type:o,selectors:[["nz-avatar"]],viewQuery:function(e,n){if(1&e&&t.Gf(M,5),2&e){let i;t.iGM(i=t.CRH())&&(n.textEl=i.first)}},hostVars:20,hostBindings:function(e,n){2&e&&(t.Udp("width",n.customSize)("height",n.customSize)("line-height",n.customSize)("font-size",n.hasIcon&&n.customSize?n.nzSize/2:null,"px"),t.ekj("ant-avatar-lg","large"===n.nzSize)("ant-avatar-sm","small"===n.nzSize)("ant-avatar-square","square"===n.nzShape)("ant-avatar-circle","circle"===n.nzShape)("ant-avatar-icon",n.nzIcon)("ant-avatar-image",n.hasSrc))},inputs:{nzShape:"nzShape",nzSize:"nzSize",nzGap:"nzGap",nzText:"nzText",nzSrc:"nzSrc",nzSrcSet:"nzSrcSet",nzAlt:"nzAlt",nzIcon:"nzIcon"},outputs:{nzError:"nzError"},exportAs:["nzAvatar"],features:[t.TTD],decls:3,vars:3,consts:[["nz-icon","",3,"nzType",4,"ngIf"],[3,"src","error",4,"ngIf"],["class","ant-avatar-string",3,"ngStyle",4,"ngIf"],["nz-icon","",3,"nzType"],[3,"src","error"],[1,"ant-avatar-string",3,"ngStyle"],["textEl",""]],template:function(e,n){1&e&&(t.YNc(0,c,1,1,"i",0),t.YNc(1,E,1,3,"img",1),t.YNc(2,P,3,2,"span",2)),2&e&&(t.Q6J("ngIf",n.nzIcon&&n.hasIcon),t.xp6(1),t.Q6J("ngIf",n.nzSrc&&n.hasSrc),t.xp6(1),t.Q6J("ngIf",n.nzText&&n.hasText))},directives:[f.O5,u.Ls,f.PC],encapsulation:2,changeDetection:0}),(0,z.gn)([(0,_.oS)()],o.prototype,"nzShape",void 0),(0,z.gn)([(0,_.oS)()],o.prototype,"nzSize",void 0),(0,z.gn)([(0,_.oS)(),(0,C.Rn)()],o.prototype,"nzGap",void 0),o})(),a=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[v.vT,f.ez,u.PV,m.ud]]}),o})()},6704:(T,y,l)=>{l.d(y,{t3:()=>P,Jb:()=>A,SK:()=>E});var z=l(946),m=l(5072),t=l(521),_=l(2298),C=l(9765),v=l(6782),f=l(6102),u=l(6182),M=l(8583),c=l(7716);let E=(()=>{class d{constructor(s,a,o,r,e,n,i){this.elementRef=s,this.renderer=a,this.mediaMatcher=o,this.ngZone=r,this.platform=e,this.breakpointService=n,this.directionality=i,this.nzAlign=null,this.nzJustify=null,this.nzGutter=null,this.actualGutter$=new _.t(1),this.dir="ltr",this.destroy$=new C.xQ,this.elementRef.nativeElement.classList.add("ant-row")}getGutter(){const s=[null,null],a=this.nzGutter||0;return(Array.isArray(a)?a:[a,null]).forEach((r,e)=>{"object"==typeof r&&null!==r?(s[e]=null,Object.keys(f.WV).map(n=>{const i=n;this.mediaMatcher.matchMedia(f.WV[i]).matches&&r[i]&&(s[e]=r[i])})):s[e]=Number(r)||null}),s}setGutterStyle(){const[s,a]=this.getGutter();this.actualGutter$.next([s,a]);const o=(r,e)=>{null!==e&&this.renderer.setStyle(this.elementRef.nativeElement,r,`-${e/2}px`)};o("margin-left",s),o("margin-right",s),o("margin-top",a),o("margin-bottom",a)}ngOnInit(){var s;this.dir=this.directionality.value,null===(s=this.directionality.change)||void 0===s||s.pipe((0,v.R)(this.destroy$)).subscribe(a=>{this.dir=a}),this.setGutterStyle()}ngOnChanges(s){s.nzGutter&&this.setGutterStyle()}ngAfterViewInit(){this.platform.isBrowser&&this.breakpointService.subscribe(f.WV).pipe((0,v.R)(this.destroy$)).subscribe(()=>{this.setGutterStyle()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return d.\u0275fac=function(s){return new(s||d)(c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(m.vx),c.Y36(c.R0b),c.Y36(t.t4),c.Y36(f.r3),c.Y36(z.Is,8))},d.\u0275dir=c.lG2({type:d,selectors:[["","nz-row",""],["nz-row"],["nz-form-item"]],hostVars:18,hostBindings:function(s,a){2&s&&c.ekj("ant-row-top","top"===a.nzAlign)("ant-row-middle","middle"===a.nzAlign)("ant-row-bottom","bottom"===a.nzAlign)("ant-row-start","start"===a.nzJustify)("ant-row-end","end"===a.nzJustify)("ant-row-center","center"===a.nzJustify)("ant-row-space-around","space-around"===a.nzJustify)("ant-row-space-between","space-between"===a.nzJustify)("ant-row-rtl","rtl"===a.dir)},inputs:{nzAlign:"nzAlign",nzJustify:"nzJustify",nzGutter:"nzGutter"},exportAs:["nzRow"],features:[c.TTD]}),d})(),P=(()=>{class d{constructor(s,a,o,r){this.elementRef=s,this.nzRowDirective=a,this.renderer=o,this.directionality=r,this.classMap={},this.destroy$=new C.xQ,this.hostFlexStyle=null,this.dir="ltr",this.nzFlex=null,this.nzSpan=null,this.nzOrder=null,this.nzOffset=null,this.nzPush=null,this.nzPull=null,this.nzXs=null,this.nzSm=null,this.nzMd=null,this.nzLg=null,this.nzXl=null,this.nzXXl=null}setHostClassMap(){const s=Object.assign({"ant-col":!0,[`ant-col-${this.nzSpan}`]:(0,u.DX)(this.nzSpan),[`ant-col-order-${this.nzOrder}`]:(0,u.DX)(this.nzOrder),[`ant-col-offset-${this.nzOffset}`]:(0,u.DX)(this.nzOffset),[`ant-col-pull-${this.nzPull}`]:(0,u.DX)(this.nzPull),[`ant-col-push-${this.nzPush}`]:(0,u.DX)(this.nzPush),"ant-col-rtl":"rtl"===this.dir},this.generateClass());for(const a in this.classMap)this.classMap.hasOwnProperty(a)&&this.renderer.removeClass(this.elementRef.nativeElement,a);this.classMap=Object.assign({},s);for(const a in this.classMap)this.classMap.hasOwnProperty(a)&&this.classMap[a]&&this.renderer.addClass(this.elementRef.nativeElement,a)}setHostFlexStyle(){this.hostFlexStyle=this.parseFlex(this.nzFlex)}parseFlex(s){return"number"==typeof s?`${s} ${s} auto`:"string"==typeof s&&/^\d+(\.\d+)?(px|em|rem|%)$/.test(s)?`0 0 ${s}`:s}generateClass(){const a={};return["nzXs","nzSm","nzMd","nzLg","nzXl","nzXXl"].forEach(o=>{const r=o.replace("nz","").toLowerCase();if((0,u.DX)(this[o]))if("number"==typeof this[o]||"string"==typeof this[o])a[`ant-col-${r}-${this[o]}`]=!0;else{const e=this[o];["span","pull","push","offset","order"].forEach(i=>{a[`ant-col-${r}${"span"===i?"-":`-${i}-`}${e[i]}`]=e&&(0,u.DX)(e[i])})}}),a}ngOnInit(){this.dir=this.directionality.value,this.directionality.change.pipe((0,v.R)(this.destroy$)).subscribe(s=>{this.dir=s,this.setHostClassMap()}),this.setHostClassMap(),this.setHostFlexStyle()}ngOnChanges(s){this.setHostClassMap();const{nzFlex:a}=s;a&&this.setHostFlexStyle()}ngAfterViewInit(){this.nzRowDirective&&this.nzRowDirective.actualGutter$.pipe((0,v.R)(this.destroy$)).subscribe(([s,a])=>{const o=(r,e)=>{null!==e&&this.renderer.setStyle(this.elementRef.nativeElement,r,e/2+"px")};o("padding-left",s),o("padding-right",s),o("padding-top",a),o("padding-bottom",a)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return d.\u0275fac=function(s){return new(s||d)(c.Y36(c.SBq),c.Y36(E,9),c.Y36(c.Qsj),c.Y36(z.Is,8))},d.\u0275dir=c.lG2({type:d,selectors:[["","nz-col",""],["nz-col"],["nz-form-control"],["nz-form-label"]],hostVars:2,hostBindings:function(s,a){2&s&&c.Udp("flex",a.hostFlexStyle)},inputs:{nzFlex:"nzFlex",nzSpan:"nzSpan",nzOrder:"nzOrder",nzOffset:"nzOffset",nzPush:"nzPush",nzPull:"nzPull",nzXs:"nzXs",nzSm:"nzSm",nzMd:"nzMd",nzLg:"nzLg",nzXl:"nzXl",nzXXl:"nzXXl"},exportAs:["nzCol"],features:[c.TTD]}),d})(),A=(()=>{class d{}return d.\u0275fac=function(s){return new(s||d)},d.\u0275mod=c.oAB({type:d}),d.\u0275inj=c.cJS({imports:[[z.vT,M.ez,m.xu,t.ud]]}),d})()},169:(T,y,l)=>{l.r(y),l.d(y,{BookModule:()=>o});var z=l(8583),m=l(8239),t=l(7716),_=l(3197),C=l(4453),v=l(9374),f=l(4514),u=l(1241),M=l(665),c=l(7018),E=l(1594);function P(r,e){if(1&r){const n=t.EpF();t.TgZ(0,"nz-list-item",18),t.NdJ("click",function(){const p=t.CHM(n).$implicit;return t.oxw().selectBook(p)}),t._UZ(1,"nz-list-item-meta",19),t.qZA()}if(2&r){const n=e.$implicit;t.xp6(1),t.Q6J("nzTitle",n.title+"(\u70b9\u51fb\u4e66\u540d\uff0c\u9690\u85cf/\u663e\u793a\u76ee\u5f55)")("nzAvatar",n.cover)}}function A(r,e){if(1&r){const n=t.EpF();t.TgZ(0,"nz-list-item",20),t.NdJ("click",function(){const p=t.CHM(n).index;return t.oxw().jumpToChapter(p)}),t.TgZ(1,"div",21),t._uU(2),t.qZA(),t.qZA()}if(2&r){const n=e.$implicit,i=e.index,h=t.oxw();t.ekj("bg-blue-100",i===h.currentChapterIndex),t.xp6(2),t.Oqu(n.title)}}let d=(()=>{class r{constructor(){this.books=[{title:"\u5723\u589f",content:"",cover:"assets/books/\u5723\u589f.jpg",path:"assets/books/\u5723\u589f.txt"}],this.selectedBook=null,this.bgColor="#ffffff",this.fontSize=16,this.chapters=[],this.currentChapterIndex=0,this.loading=!1,this.loadingText="\u4e66\u7c4d\u5185\u5bb9\u52a0\u8f7d\u4e2d...",this.sidebarVisible=!0}ngOnInit(){this.loadLocalBooks()}loadLocalBooks(){var n=this;return(0,m.Z)(function*(){n.loading=!0;try{const h=yield(yield fetch("assets/books/book-list.json")).json();n.books=yield Promise.all(h.map(function(){var p=(0,m.Z)(function*(O){const x=yield n.loadBookContent(O.path);return{title:O.title,content:x,cover:O.cover||"assets/background/7.jpeg"}});return function(O){return p.apply(this,arguments)}}())),n.selectedBook=n.books[0],n.selectedBook&&n.jumpToChapter(0)}catch(i){console.error("\u52a0\u8f7d\u4e66\u7c4d\u5931\u8d25:",i)}n.loading=!1})()}loadBookContent(n){var i=this;return(0,m.Z)(function*(){const p=yield(yield fetch(`assets/books/${n}`)).text();return i.parseChapters(p),p})()}parseChapters(n){this.chapters=[];const i=/^(\u7b2c[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d\u5341\u767e\u5343\u4e07\u96f6]+\u7ae0|\d+\.\d+|\d+\u3001)[^\n]+/gm;let h,p=0;for(;null!==(h=i.exec(n));)this.chapters.push({title:h[0].trim(),position:h.index,content:""}),p=h.index+h[0].length}jumpToChapter(n){this.currentChapterIndex=n,!this.chapters[n].content&&this.selectedBook&&(this.chapters[n].content=this.getChapterContent(n))}getChapterContent(n){return!this.selectedBook||n>=this.chapters.length-1?this.chapters[n].content||"":this.selectedBook.content.substring(this.chapters[n].position,this.chapters[n+1].position)}prevChapter(){this.currentChapterIndex>0&&this.jumpToChapter(this.currentChapterIndex-1)}nextChapter(){if(this.currentChapterIndex<this.chapters.length-1){this.jumpToChapter(this.currentChapterIndex+1);const n=document.querySelector(".right nz-card");n&&(n.scrollTop=0)}}toggleSidebar(){this.sidebarVisible=!this.sidebarVisible}selectBook(n){this.selectedBook=this.selectedBook!==n?n:null}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["xj-book"]],decls:28,vars:16,consts:[[1,"content"],[1,"left"],[1,"text-xl","font-bold","mb-4","text-gray-800"],["class","hover:bg-gray-100 cursor-pointer rounded-md mb-2",3,"click",4,"ngFor","ngForOf"],[1,"text-xl","font-bold","mb-4"],[1,"chapter-list","mb-4",3,"hidden"],["class","hover:bg-gray-100 cursor-pointer py-2 px-4 border-b",3,"bg-blue-100","click",4,"ngFor","ngForOf"],[1,"right"],[1,"book-title"],["nz-button","","nzType","default",2,"margin-right","10px",3,"click"],[1,"ml-2","text-gray-700"],[1,"w-48",3,"ngModel","nzMin","nzMax","ngModelChange"],[1,"shadow-lg","overflow-y-auto"],[1,"prose","max-w-none"],[1,"whitespace-pre-wrap","font-sans"],[1,"flex","justify-between","mt-4"],["nz-button","",3,"disabled","click"],[3,"loading","loadingText"],[1,"hover:bg-gray-100","cursor-pointer","rounded-md","mb-2",3,"click"],[3,"nzTitle","nzAvatar"],[1,"hover:bg-gray-100","cursor-pointer","py-2","px-4","border-b",3,"click"],[1,"truncate"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"h2",2),t._uU(3,"\u4e66\u67b6"),t.qZA(),t.TgZ(4,"nz-list"),t.YNc(5,P,2,2,"nz-list-item",3),t.qZA(),t.TgZ(6,"h2",4),t._uU(7,"\u76ee\u5f55"),t.qZA(),t.TgZ(8,"div",5),t.TgZ(9,"nz-list"),t.YNc(10,A,3,3,"nz-list-item",6),t.qZA(),t.qZA(),t.qZA(),t.TgZ(11,"div",7),t.TgZ(12,"div",8),t.TgZ(13,"button",9),t.NdJ("click",function(){return i.toggleSidebar()}),t._uU(14),t.qZA(),t.TgZ(15,"label",10),t._uU(16,"\u5b57\u4f53\u5927\u5c0f:"),t.qZA(),t.TgZ(17,"nz-slider",11),t.NdJ("ngModelChange",function(p){return i.fontSize=p}),t.qZA(),t.qZA(),t.TgZ(18,"nz-card",12),t.TgZ(19,"div",13),t.TgZ(20,"pre",14),t._uU(21),t.qZA(),t.qZA(),t.TgZ(22,"div",15),t.TgZ(23,"button",16),t.NdJ("click",function(){return i.prevChapter()}),t._uU(24," \u4e0a\u4e00\u7ae0 "),t.qZA(),t.TgZ(25,"button",16),t.NdJ("click",function(){return i.nextChapter()}),t._uU(26," \u4e0b\u4e00\u7ae0 "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(27,"xj-loading",17)),2&n&&(t.xp6(1),t.ekj("hidden",!i.sidebarVisible),t.xp6(4),t.Q6J("ngForOf",i.books),t.xp6(3),t.Q6J("hidden",!i.selectedBook),t.xp6(2),t.Q6J("ngForOf",i.chapters),t.xp6(4),t.hij(" ",i.sidebarVisible?"\u9690\u85cf\u4e66\u67b6":"\u663e\u793a\u4e66\u67b6"," "),t.xp6(3),t.Q6J("ngModel",i.fontSize)("nzMin",12)("nzMax",32),t.xp6(2),t.Udp("font-size",i.fontSize,"px"),t.xp6(2),t.hij("    ",null==i.chapters[i.currentChapterIndex]?null:i.chapters[i.currentChapterIndex].content,"\n                "),t.xp6(2),t.Q6J("disabled",i.currentChapterIndex<=0),t.xp6(2),t.Q6J("disabled",i.currentChapterIndex>=i.chapters.length-1),t.xp6(2),t.Q6J("loading",i.loading)("loadingText",i.loadingText))},directives:[_.n_,z.sg,C.ix,v.dQ,f.w,u.jS,M.JJ,M.On,c.bd,E.N,_.AA,_.yi],styles:["@media (max-width: 768px){.content[_ngcontent-%COMP%]{width:100%;height:auto;display:flex;flex-direction:column}.content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{height:150px;transition:all .3s;z-index:99}.content[_ngcontent-%COMP%]   .left.hidden[_ngcontent-%COMP%]{height:0;overflow:hidden;opacity:0}.content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .chapter-list[_ngcontent-%COMP%]{height:550px;overflow-y:auto;background-color:#fff}.content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{flex:1;overflow:hidden}.content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   nz-card[_ngcontent-%COMP%]{height:calc(100vh - 360px);overflow-y:auto}.content[_ngcontent-%COMP%]   .left.hidden[_ngcontent-%COMP%] + .right[_ngcontent-%COMP%]   nz-card[_ngcontent-%COMP%]{height:calc(100vh - 210px)}}@media (min-width: 769px){.content[_ngcontent-%COMP%]{display:flex;height:calc(100vh - 126px);overflow:hidden}.content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{width:300px;height:100%;overflow-y:auto;padding:16px}.content[_ngcontent-%COMP%]   .left.hidden[_ngcontent-%COMP%]{width:0;overflow:hidden;opacity:0}.content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .chapter-list[_ngcontent-%COMP%]{height:500px;overflow-y:auto}.content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{flex:1;height:100%;overflow:hidden;display:flex;flex-direction:column;padding:10px}.content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .book-title[_ngcontent-%COMP%]{padding:0 16px}.content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   nz-card[_ngcontent-%COMP%]{flex:1;overflow-y:auto;margin:16px}.content[_ngcontent-%COMP%]   .prose[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto;line-height:1.6}.content[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{font-family:inherit;white-space:pre-wrap}}"]}),r})();var g=l(4655),s=l(9017);const a=[{path:"",component:d}];let o=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[z.ez,g.Bz.forChild(a),M.u5,_.Ph,c.vh,u.N3,C.sL,s.I]]}),r})()}}]);